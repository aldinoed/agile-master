{"ast":null,"code":"import React,{useEffect,useState}from'react';import styles from\"../style\";import{Navbar,Identitas,Formprofile,Instruction}from\"../components/profile/magang\";import{useLocation,useNavigate}from'react-router-dom';import axios from'axios';import Cookies from'js-cookie';import Loading from'../components/loading';// import {  } from \"react-router-dom\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Profilemaba=loggedUser=>{const[showInstruction,setShowInstruction]=useState(false);let refreshToken=Cookies.get('refresh_token');const location=useLocation();const[user,setUser]=useState('');const state=location.state;const navigate=useNavigate();const id=localStorage.getItem('id');useEffect(()=>{// setUser(data);\nif(!refreshToken||localStorage.getItem('nama')==null||localStorage.getItem('id')==null||localStorage.getItem('nrp')==null){localStorage.clear();navigate('/');}else if(refreshToken){let name=localStorage.getItem('nama');setUser(name);}},[]);useEffect(()=>{const handleHashChange=()=>{setShowInstruction(window.location.hash==='#instruction');};window.addEventListener('hashchange',handleHashChange);handleHashChange();// Panggil fungsi saat komponen dimuat\nreturn()=>{window.removeEventListener('hashchange',handleHashChange);};},[]);useEffect(()=>{async function fetchData(){try{const response=await axios.get('http://103.127.135.153:5000/api/user/'+id);setUser(response.data[0]);// console.log(user.nama)\n}catch(error){console.error('Error fetching user data:',error);}}fetchData();},[]);// useEffect(()=>{\n//   if(loggedUser != null){\n//     setUser(loggedUser);\n//   }\n// },[user])\nreturn/*#__PURE__*/_jsx(_Fragment,{children:user==''?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center\",children:/*#__PURE__*/_jsx(Loading,{type:'spin',color:\"#aaaaaa\"})})}):user===null||user===undefined?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"p\",{children:\"DATA KOSONG\"})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\" pb-20\",children:/*#__PURE__*/_jsx(Navbar,{nama:user})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row px-20\",children:[/*#__PURE__*/_jsx(Identitas,{user:user}),/*#__PURE__*/_jsx(\"div\",{className:\" ms-5\",style:{maxWidth:\"80%\",minWidth:\"80%\"},children:showInstruction==false?/*#__PURE__*/_jsx(Formprofile,{user:user}):/*#__PURE__*/_jsx(Instruction,{})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(styles.flexCenter,\" py-16 \")})})]})});};export default Profilemaba;","map":{"version":3,"names":["React","useEffect","useState","styles","Navbar","Identitas","Formprofile","Instruction","useLocation","useNavigate","axios","Cookies","Loading","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Profilemaba","loggedUser","showInstruction","setShowInstruction","refreshToken","get","location","user","setUser","state","navigate","id","localStorage","getItem","clear","name","handleHashChange","window","hash","addEventListener","removeEventListener","fetchData","response","data","error","console","children","className","type","color","undefined","nama","style","maxWidth","minWidth","concat","flexCenter"],"sources":["/var/www/html/new/agile-master/web_project/goship/src/pages/Profile_maba.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport styles from \"../style\";\nimport { Navbar, Identitas, Formprofile, Instruction } from \"../components/profile/magang\"\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport Cookies from 'js-cookie';\nimport Loading from '../components/loading';\n// import {  } from \"react-router-dom\";\n\nconst Profilemaba = (loggedUser) => {\n  const [showInstruction, setShowInstruction] = useState(false);\n  let refreshToken = Cookies.get('refresh_token')\n  const location = useLocation();\n  const [user, setUser] = useState('')\n  const state = location.state;\n  const navigate = useNavigate();\n\n  const id = localStorage.getItem('id');\n  useEffect(() => {\n    // setUser(data);\n    if (!refreshToken || localStorage.getItem('nama')==null ||localStorage.getItem('id')==null || localStorage.getItem('nrp')==null) {\n      localStorage.clear()\n      navigate('/');\n    } else if (refreshToken) {\n      let name = localStorage.getItem('nama')\n      setUser(name)\n    }\n  }, []);\n  useEffect(() => {\n    const handleHashChange = () => {\n      setShowInstruction(window.location.hash === '#instruction');\n    };\n\n    window.addEventListener('hashchange', handleHashChange);\n    handleHashChange(); // Panggil fungsi saat komponen dimuat\n\n    return () => {\n      window.removeEventListener('hashchange', handleHashChange);\n    };\n  }, []);\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        const response = await axios.get('http://103.127.135.153:5000/api/user/' + id);\n        setUser(response.data[0]);\n        // console.log(user.nama)\n\n      } catch (error) {\n        console.error('Error fetching user data:', error);\n      }\n    }\n    fetchData();\n  }, [])\n\n  // useEffect(()=>{\n  //   if(loggedUser != null){\n  //     setUser(loggedUser);\n  //   }\n  // },[user])\n\n  return (\n    <>\n      {user == '' ? <><div className='flex justify-center items-center'><Loading type={'spin'} color={\"#aaaaaa\"} /></div></> : user === null || user === undefined ? <><p>DATA KOSONG</p></> : <><div className=\" pb-20\">\n        <Navbar nama={user} />\n      </div><div className=\"flex flex-row px-20\">\n          <Identitas user={user} />\n          <div className=' ms-5' style={{ maxWidth: \"80%\", minWidth: \"80%\" }}>\n\n\n\n            {showInstruction == false ? <Formprofile user={user} /> : <Instruction />}\n          </div>\n\n        </div><div>\n          <div className={`${styles.flexCenter} py-16 `}>\n\n          </div>\n        </div></>}\n    </>\n  )\n}\n\nexport default Profilemaba;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}